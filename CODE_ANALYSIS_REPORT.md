# üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡πâ‡∏î: ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô

## üî¥ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏û‡∏ö

### 1. **‡πÑ‡∏ü‡∏•‡πå Backup ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô** ‚ö†Ô∏è
**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:**
- `services/user-car-service/src/index_backup.js`
- `services/user-car-service/src/infrastructure/api/express_backup.js`

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏ö‡∏™‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ó‡∏¥‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `.backup/` ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á

---

### 2. **‡πÇ‡∏Ñ‡πâ‡∏î Infrastructure ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô (Code Duplication)** üîÑ

#### 2.1 **RabbitMQAdapter** - ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:**
- `services/user-car-service/src/infrastructure/messaging/RabbitMQAdapter.js`
- `services/user-service/src/infrastructure/messaging/RabbitMQAdapter.js`
- `services/slot-service/src/infrastructure/messaging/RabbitMQAdapter.js`
- `services/recently-service/src/infrastructure/messaging/RabbitMQAdapter.js`

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** 
- ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô:
  - `user-car-service` ‡πÉ‡∏ä‡πâ **Queue** (`events_queue`)
  - `user-service` ‡πÅ‡∏•‡∏∞ `slot-service` ‡πÉ‡∏ä‡πâ **Exchange** (`events_exchange`)
- ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏µ‡πà ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏™‡∏£‡πâ‡∏≤‡∏á **Shared Library** ‡∏´‡∏£‡∏∑‡∏≠ **Common Package** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Infrastructure
- ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Base Class ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á Queue ‡πÅ‡∏•‡∏∞ Exchange

#### 2.2 **SupabaseEventStore** - ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:**
- `services/user-car-service/src/infrastructure/persistence/SupabaseEventStore.js`
- `services/user-service/src/infrastructure/persistence/SupabaseEventStore.js`
- `services/slot-service/src/infrastructure/persistence/SupabaseEventStore.js`
- `services/recently-service/src/infrastructure/persistence/SupabaseEventStore.js`

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** 
- ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö 100% (‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏Ñ‡πà log message)
- ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç bug ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô Shared Package
- ‡πÉ‡∏ä‡πâ Dependency Injection ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Service ‡πÉ‡∏ä‡πâ instance ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

#### 2.3 **EventConsumer** - ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:**
- `services/user-car-service/src/infrastructure/projections/EventConsumer.js`
- `services/user-service/src/infrastructure/projections/EventConsumer.js`
- `services/slot-service/src/infrastructure/projections/EventConsumer.js`
- `services/recently-service/src/projections/EventConsumer.js`
- `services/reservation-service/src/EventConsumer.js`

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** 
- ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Service ‡∏°‡∏µ EventConsumer ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á ‡πÅ‡∏ï‡πà‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ô
- ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Event Types

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏™‡∏£‡πâ‡∏≤‡∏á Base EventConsumer Class
- ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Service ‡∏™‡∏∑‡∏ö‡∏ó‡∏≠‡∏î‡πÅ‡∏•‡∏∞ override method `handleEvent()` ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

---

### 3. **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô dotenv ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô** üì¶

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- `services/user-car-service/src/index.js` - **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ** dotenv (‡∏°‡∏µ comment ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- `services/user-car-service/src/index_backup.js` - **‡πÉ‡∏ä‡πâ** dotenv
- `services/reservation-service/src/index.js` - **‡πÉ‡∏ä‡πâ** dotenv
- `api-gateway/src/index.js` - **‡πÉ‡∏ä‡πâ** dotenv
- `services/user-service/src/index.js` - **‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ** dotenv (‡∏°‡∏µ comment ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô: ‡πÉ‡∏ä‡πâ `--env-file=.env` ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ `dotenv.config()` ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å Service
- ‡∏•‡∏ö import dotenv ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ

---

### 4. **‡πÑ‡∏ü‡∏•‡πå express.js ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô** üìÅ

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:**
- `services/user-car-service/src/infrastructure/api/express.js`

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:** 
- ‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö User Service (POST /users, GET /users/:id) ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô `user-car-service`
- `user-car-service` ‡πÉ‡∏ä‡πâ `index.js` ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ `express.js` ‡∏ô‡∏µ‡πâ

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏ó‡∏¥‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ‡∏ó‡∏µ‡πà `user-service` ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

---

### 5. **Service ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå** üöß

**‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:**
- `services/reservation-service/src/index.js`

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- Service ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà dummy endpoint ‡∏ó‡∏µ‡πà return 404
- ‡∏°‡∏µ EventConsumer ‡πÅ‡∏ï‡πà‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö
- ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö `user-car-service` ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Reservation ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ `reservation-service` ‡∏´‡∏£‡∏∑‡∏≠ `user-car-service` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Reservation
- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ `reservation-service` ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô placeholder

---

### 6. **‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ RabbitMQ ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô** üîÄ

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- `user-car-service` ‡πÉ‡∏ä‡πâ **Queue** (`events_queue`)
- `user-service` ‡πÅ‡∏•‡∏∞ `slot-service` ‡πÉ‡∏ä‡πâ **Exchange** (`events_exchange`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:**
- EventConsumer ‡∏Ç‡∏≠‡∏á `user-car-service` ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö Event ‡∏à‡∏≤‡∏Å Service ‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Exchange
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Event-Driven ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

**‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:** 
- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Exchange ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å Service
- ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á Queue ‡πÅ‡∏•‡∏∞ Exchange ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°

---

### 7. **Import ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô** üóëÔ∏è

**‡πÉ‡∏ô `services/user-car-service/src/index.js`:**
- ‡∏°‡∏µ comment ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ `dotenv` ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏°‡∏µ import ‡πÉ‡∏ô `index_backup.js`
- `axios` ‡∏ñ‡∏π‡∏Å import ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏õ‡∏±‡∏ç‡∏´‡∏≤)

---

## üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### üî¥ **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏π‡∏á (‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)**
1. ‚úÖ ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå backup (`index_backup.js`, `express_backup.js`)
2. ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç RabbitMQ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ Exchange ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å Service
3. ‚úÖ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ dotenv

### üü° **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)**
4. ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á Shared Library ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Infrastructure (RabbitMQAdapter, SupabaseEventStore)
5. ‚úÖ ‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `reservation-service` ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
6. ‚úÖ ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå `express.js` ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### üü¢ **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≥ (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï)**
7. ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á Base Class ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EventConsumer
8. ‚úÖ ‡∏ó‡∏≥ Code Review ‡πÅ‡∏•‡∏∞ Refactoring ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

---

## üí° ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

### 1. **‡∏™‡∏£‡πâ‡∏≤‡∏á Shared Package**
```
packages/
  ‚îî‚îÄ‚îÄ common/
      ‚îú‚îÄ‚îÄ infrastructure/
      ‚îÇ   ‚îú‚îÄ‚îÄ messaging/
      ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RabbitMQAdapter.js
      ‚îÇ   ‚îî‚îÄ‚îÄ persistence/
      ‚îÇ       ‚îî‚îÄ‚îÄ SupabaseEventStore.js
      ‚îî‚îÄ‚îÄ package.json
```

### 2. **‡πÉ‡∏ä‡πâ Monorepo Tools**
- ‡πÉ‡∏ä‡πâ **Lerna** ‡∏´‡∏£‡∏∑‡∏≠ **Nx** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Shared Packages
- ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ **npm workspaces** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ dependencies

### 3. **‡∏™‡∏£‡πâ‡∏≤‡∏á Base Classes**
```javascript
// BaseEventConsumer.js
export class BaseEventConsumer {
  constructor(supabaseClient, messageBroker) {
    this.supabase = supabaseClient;
    this.messageBroker = messageBroker;
  }
  
  async start() {
    // Common logic
  }
  
  async handleEvent(eventMessage) {
    // Override in subclasses
    throw new Error('handleEvent must be implemented');
  }
}
```

---

## üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô

- **RabbitMQAdapter:** ‡∏ã‡πâ‡∏≥ 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 60-65 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå)
- **SupabaseEventStore:** ‡∏ã‡πâ‡∏≥ 4 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 170 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå)
- **EventConsumer:** ‡∏ã‡πâ‡∏≥ 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 100 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå)
- **‡πÑ‡∏ü‡∏•‡πå Backup:** 2 ‡πÑ‡∏ü‡∏•‡πå (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 200 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏£‡∏ß‡∏°)

**‡∏£‡∏ß‡∏°:** ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì **1,500+ ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î** ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

---

*‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: $(date)*

